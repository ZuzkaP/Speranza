@using Speranza.Models
@using Speranza.Views
@model Speranza.Models.AdminUsersModel
@{
    ViewBag.Title = "Správa používateľov";
    Layout = "~/Views/Layout.cshtml";
}

<div class="container">
    <h2>Správa používateľov</h2>



    <div id="messageBox" style="display:none;" class="alert alert-success" role="alert"></div>

    <div class="col-sm-4">
        <input type="text" id="searchBox" placeholder="Hľadaj podľa priezviska..." class="form-control">
    </div>

        <table class="table table-striped table-hover" id="UsersTable">
            <thead>
                <tr>
                    <th>Meno</th>
                    <th>Priezvisko</th>
                    <th>Email</th>
                    <th>Tel. číslo</th>
                    <th>Kategória</th>
                    <th colspan="2">Stav permanentky</th>
                    <th>Tréningy</th>
                    <th>Admin</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model.Users)
                {
                    <tr>
                        <td>@user.Name</td>
                        <td>@user.Surname</td>
                        <td>@user.Email</td>
                        <td>@user.PhoneNumber</td>
                        <td>
                            @Html.DropDownList("CategoryCombo", ViewHelper.CreateSelectListItems(Model.Categories, user.Category), new { id = user.Email, @class = "Category form-control" })
                        </td>
                        <td>
                            <span id="freeSignUpsCell-@ViewHelper.GetEmailForJS(user.Email)"> @user.NumberOfFreeSignUps </span>
                        </td>
                        <td>
                            <div class="btn-group btn-group-xs">
                                <button type="button" class="btn btn-primary SignUpCount" data-count="1" data-email="@user.Email"> +1</button>
                                <button type="button" class="btn btn-primary SignUpCount" data-count="10" data-email="@user.Email">+10</button>
                                <button type="button" class="btn btn-primary SignUpCount" data-count="20" data-email="@user.Email">+20</button>
                                <button type="button" class="btn btn-danger  SignUpCount" data-count="-1" data-email="@user.Email"> -1</button>
                                <button type="button" class="btn btn-danger  SignUpCount" data-count="-10" data-email="@user.Email">-10</button>
                                <button type="button" class="btn btn-danger  SignUpCount" data-count="-20" data-email="@user.Email">-20</button>
                            </div>
                        </td>
                        <td>
                            <span id="@ViewHelper.GetEmailForJS(user.Email)-TrainingCount">@user.TrainingCount</span>
                            <span class="label label-info trainingsDetails" style="cursor:pointer" data-email="@user.Email">Detail</span>
                        </td>
                        <td>@Html.CheckBox("IsAdmin", user.IsAdmin, new { id = user.Email, @class = "IsAdmin" }) </td>
                    </tr>
                }
            </tbody>
        </table>

    </div>

@Html.Partial("UserTrainingsList");

@section scripts {
    <script>

    </script>
<script src="~/Scripts/AdminUsers.js"></script>
<script src="~/Scripts/jquery.tablesorter.min.js"></script>
}